<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />

<link href="content/style.css" media="screen" rel="stylesheet" type="text/css">

<script src="webOSjs-0.1.0/webOS.js" charset="utf-8"></script>
<script src="content/twitch.js" charset="utf-8"></script>
<script	src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

<script>
	$(function(e) {
		showGames();
		
	});

	$(document).on("keypress", function(e) {
		var k = e.keyCode;
		if (rcu_navigable_items.length == 0) {
			return;
		}
/*
		switch(e.keyCode) {
		case 39:
			if (rcu_idx < rcu_navigable_items.length) {
				rcu_idx++;
				rcu_navigable_items.eq(rcu_idx).focus();
			}
			break;
		case 37:
			if (rcu_idx > 0) {
				rcu_idx--;
				rcu_navigable_items.eq(rcu_idx).focus();
			}

			//$(this).parent().css( "background-color", "green" );
			//$(this).prev().focus();
			//$(this).prev().css( "background-color", "green" );
			break;
		case 40:
			break;
		case 38:
			break;
		}
		*/
				switch(e.keyCode) {
		case 39:
			rcuNavigate("right");
			rcuShowFocus();
			break;
		case 37:
			rcuNavigate("left");
			rcuShowFocus();

			//$(this).parent().css( "background-color", "green" );
			//$(this).prev().focus();
			//$(this).prev().css( "background-color", "green" );
			break;
		case 40:
			rcuNavigate("down");
			rcuShowFocus();
			break;
		case 38:
			rcuNavigate("up");
			rcuShowFocus();
			break;
		}
	});
	/*
	$(document).on("keypress", "#twitch-widget-gamelist div", function(e) {
		var x = $("#twitch-widget-gamelist");
		var y = $("#twitch-widget-gamelist div").first();
		var nr_items_in_row = x.width() / y.outerWidth(true);
		nr_items_in_row = Math.floor(nr_items_in_row);
		switch(e.keyCode) {
		case 39:
			$(this).next().focus();
			break;
		case 37:
			//$(this).parent().css( "background-color", "green" );
			$(this).prev().focus();
			//$(this).prev().css( "background-color", "green" );
			break;
		case 40:
			$(this).siblings().eq($(this).index() + nr_items_in_row - 1).focus();
			break;
		case 38:
			var z = $(this).index() - nr_items_in_row;
			if (z >= 0) {
				$(this).siblings().eq($(this).index() - nr_items_in_row).focus();
			}
			break;
		case 13:
			var id = $(this).attr("id");
			var name = $(this).attr("name");

			showStreamers(name);
			break;
			
		}
	});
*/
	//Click on "Games"
	$(document).on("click", "#games", function(e) {
		showGames();
	});

	// Click on "Channels"
	$(document).on("click", "#channels", function(e) {
		showChannels();
	});
	 
	// HIT ENTER IN THE SEARCH BOX
	$(document).on("keypress", "#search", function(e){
		if(e.keyCode === 13){
			searchChannel($("#search").val());
		}
	});
	
	// CLICK A STREAM :: WHEN CKICK A STREAM IMAGE -> SHOW STREAM
	$(document).on("click", "#twitch-widget-streamlist a", function(e) {
		e.preventDefault();
		var id = $(this).attr("id");
		var name = $(this).attr("name");
	  
		window.location = "stream.html#" + name;
	});
			
	// CLICK A GAME :: WHEN CKICK A GAME IMAGE -> SHOW LIST OF STREAMERS
	$(document).on("click", "#twitch-widget-gamelist div", function(e) {
		e.preventDefault();
		var id = $(this).attr("id");
		var name = $(this).attr("name");

		showStreamers(name);
	});

	$(document).on("keypress", "#twitch-widget-gamelist div", function(e) {
		if(e.keyCode === 13){
			$(this).click();
		}
	});

	$(document).on("keypress", "#twitch-widget-streamlist div", function(e) {
		if(e.keyCode === 13){
			var r = $(this).find("a:first").attr("name");
			$(this).find("a:first").click();
		}
	});
</script>
	
	
</head>
<body>
	<div class="left_panel" id="left_panel">
		<div class="logo">
			<img src="content/twitch_logo_trans.png" alt="">
			<input type="search" placeholder="Stream Search" class="search" id="search" data-rcu-navigable="true" tabindex='0'>
		</div>

		<div class="left_panel_menu">
			<span class="title">BROWSE</span>
			<ul class="left_panel_menu_list">
				<li>
					<a href="#" id="games" data-rcu-navigable="true" tabindex='0'>Games</a>
				</li>
				<li>
					<a href="#" id="channels" data-rcu-navigable="true" tabindex='0'>Channels</a>
				</li>
			</ul>
		</div>
	</div>

	<div class="right_panel" tabindex='-1'>	
		<h1 id="game-list-header">All Games</h1>
		
		<div class="clear"></div>

		<div class="twitch-widget-gamelist" id="twitch-widget-gamelist"></div>
		<div class="twitch-widget-streamlist" id="twitch-widget-streamlist"></div>

	</div>
	<div style="clear: both;"></div>
</body>
</html>
